# ЁЯдЦ AI Rewrite Feature - р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Бр╕ер╕░р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

## тЬЕ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Чр╕│р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з

1. тЬЕ р╕кр╕гр╣Йр╕▓р╕З `OpenAIService` р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Б OpenAI API
2. тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б method `aiRewrite()` р╣Гр╕Щ `PropertyController`
3. тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б route `/admin/properties/{property}/ai-rewrite`
4. тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕Ыр╕╕р╣Ир╕бр╣Бр╕ер╕░ JavaScript р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ Properties (index р╣Бр╕ер╕░ show)
5. тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б config р╣Гр╕Щ `config/services.php`

## ЁЯФз р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓

### 1. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ OpenAI API Key

р╣Ар╕Юр╕┤р╣Ир╕бр╣Гр╕Щр╣Др╕Яр╕ер╣М `.env`:

```env
OPENAI_API_KEY=sk-your-api-key-here
```

**р╕зр╕┤р╕Шр╕╡р╕лр╕▓ API Key:**
1. р╣Др╕Ыр╕Чр╕╡р╣И https://platform.openai.com/api-keys
2. р╕кр╕гр╣Йр╕▓р╕З API Key р╣Гр╕лр╕бр╣И
3. Copy р╣Бр╕ер╕░р╕зр╕▓р╕Зр╣Гр╕Щ `.env`

### 2. Clear Config Cache

```bash
php artisan config:clear
```

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ Properties Index (`/admin/properties`)

1. р╕лр╕▓р╕Чр╕гр╕▒р╕Юр╕вр╣Мр╕кр╕┤р╕Щр╕Чр╕╡р╣Ир╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡ AI Description (р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Ыр╕╕р╣Ир╕б "р╕кр╕▒р╣Ир╕З AI р╣Ар╕Вр╕╡р╕вр╕Щр╣Гр╕лр╣Й")
2. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б "р╕кр╕▒р╣Ир╕З AI р╣Ар╕Вр╕╡р╕вр╕Щр╣Гр╕лр╣Й"
3. р╕гр╕░р╕Ър╕Ър╕Ир╕░р╣Бр╕кр╕Фр╕З "р╕Бр╕│р╕ер╕▒р╕Зр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е..."
4. р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з р╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╕Ир╕░ reload р╣Бр╕ер╕░р╣Бр╕кр╕Фр╕З "р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Й" р╣Бр╕Чр╕Щ

### р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ Property Detail (`/admin/properties/{id}`)

1. р╣Др╕Ыр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Чр╕гр╕▒р╕Юр╕вр╣Мр╕кр╕┤р╕Щ
2. р╣Гр╕Щр╕кр╣Ир╕зр╕Щ "р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Чр╕╡р╣И AI Rewrite" р╕Ир╕░р╕бр╕╡р╕Ыр╕╕р╣Ир╕б "р╕кр╕▒р╣Ир╕З AI р╣Ар╕Вр╕╡р╕вр╕Щр╣Гр╕лр╣Й" (р╕Цр╣Йр╕▓р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡)
3. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б
4. р╕гр╕░р╕Ър╕Ър╕Ир╕░р╣Бр╕кр╕Фр╕З "р╕Бр╕│р╕ер╕▒р╕Зр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е..."
5. р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Чр╕▒р╕Щр╕Чр╕╡р╣Бр╕ер╕░р╕Ыр╕╕р╣Ир╕бр╕Ир╕░р╕лр╕▓р╕вр╣Др╕Ы

## ЁЯУЭ р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣М

- тЬЕ р╣Гр╕Кр╣Й GPT-4o model
- тЬЕ р╕кр╕гр╣Йр╕▓р╕З Prompt р╕Чр╕╡р╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕кр╕▒р╕Зр╕лр╕▓р╕гр╕┤р╕бр╕Чр╕гр╕▒р╕Юр╕вр╣М
- тЬЕ р╣Гр╕Кр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕е Property (title, location, price, type) р╣Ар╕Ыр╣Зр╕Щ context
- тЬЕ Error handling р╣Бр╕ер╕░р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ
- тЬЕ Loading state р╣Бр╕ер╕░ disable button р╕Вр╕Ур╕░р╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е
- тЬЕ Auto-reload р╕лр╕гр╕╖р╕н update content р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕│р╣Ар╕гр╣Зр╕И

## ЁЯФН р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Logs

```bash
tail -f storage/logs/laravel.log
```

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Response

р╣Ар╕Ыр╕┤р╕Ф Browser DevTools (F12) тЖТ Network tab тЖТ р╕Фр╕╣ response р╕Ир╕▓р╕Б `/admin/properties/{id}/ai-rewrite`

## тЪая╕П р╕Вр╣Йр╕нр╕Др╕зр╕гр╕гр╕░р╕зр╕▒р╕З

1. **API Key**: р╕Хр╣Йр╕нр╕Зр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ `OPENAI_API_KEY` р╣Гр╕Щ `.env` р╕Бр╣Ир╕нр╕Щр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
2. **Cost**: р╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Б OpenAI API р╕бр╕╡р╕Др╣Ир╕▓р╣Гр╕Кр╣Йр╕Ир╣Ир╕▓р╕в р╕Др╕зр╕г monitor usage
3. **Timeout**: р╕Хр╕▒р╣Йр╕З timeout 60 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡ р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Б API
4. **Rate Limiting**: OpenAI р╕бр╕╡ rate limit р╕Др╕зр╕гр╕гр╕░р╕зр╕▒р╕Зр╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Бр╕Ър╣Ир╕нр╕вр╣Ар╕Бр╕┤р╕Щр╣Др╕Ы

## ЁЯРЫ Troubleshooting

### р╕Ыр╕▒р╕Нр╕лр╕▓: "OpenAI API key р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Др╕зр╣Й"

**р╣Бр╕Бр╣Йр╣Др╕В**: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Др╕Фр╣Йр╣Ар╕Юр╕┤р╣Ир╕б `OPENAI_API_KEY` р╣Гр╕Щ `.env` р╣Бр╕ер╕░р╕гр╕▒р╕Щ `php artisan config:clear`

### р╕Ыр╕▒р╕Нр╕лр╕▓: "р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Б OpenAI API"

**р╣Бр╕Бр╣Йр╣Др╕В**: 
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ API Key р╕зр╣Ир╕▓р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ API Key р╕бр╕╡ credit р╣Ар╕Юр╕╡р╕вр╕Зр╕Юр╕н
- р╕Фр╕╣ error message р╣Гр╕Щ Laravel log

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕Ыр╕╕р╣Ир╕бр╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ

**р╣Бр╕Бр╣Йр╣Др╕В**: 
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Browser Console (F12) р╕зр╣Ир╕▓р╕бр╕╡ JavaScript errors
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ CSRF token р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ route р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З

## ЁЯУК Monitoring

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Usage

р╣Др╕Ыр╕Чр╕╡р╣И https://platform.openai.com/usage р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ API

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Щ Database

```sql
SELECT id, title, 
       CASE WHEN ai_description IS NULL THEN 'No' ELSE 'Yes' END as has_ai_description
FROM properties;
```

---

**Last Updated**: 2024-12-26

